<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Settings - EPD Clock</title>
  <link rel="stylesheet" href="/style.css">
</head>
<body>
  <h2>Settings - EPD Clock</h2>
  <a href="/"><button>Back to dashboard</button></a>

  <section>
    <h3>Wi-Fi (Station)</h3>
    SSID: <input id="wifi_ssid" placeholder="my_wifi"><br>
    Password: <input id="wifi_pass" type="password" placeholder="leave empty to keep current"><br>
    <div style="margin:6px 0;">
      <button id="btnScanWifi" type="button">Scan networks</button>
      <select id="wifi_scan_list" style="min-width:220px;">
        <option value="">-- select a scanned network --</option>
      </select>
      <span id="wifi_scan_status" style="font-size:12px;color:#555;margin-left:6px;"></span>
    </div>
    <small>Tip: if not configured, the device starts in access-point mode <b>EPD_Clock</b>.</small>
  </section>

  <hr>

  <section>
    <h3>MQTT</h3>
    <label><input type="checkbox" id="mqtt_enabled"> Enable MQTT</label><br>
    Server: <input id="mqtt_host" placeholder="mqtt.local"><br>
    Port: <input id="mqtt_port" type="number" min="1" max="65535"><br>
    User: <input id="mqtt_user"><br>
    Password: <input id="mqtt_pass" type="password" placeholder="leave empty to keep current"><br>
    Topic: <input id="mqtt_topic" placeholder="epdclock/measure"><br>
    <button id="btnMqttTest">Test MQTT</button>
  </section>

  <hr>

  <section>
    <h3>Timing</h3>
    Deep sleep (s): <input id="deepsleep_interval_s" type="number"><br>
    Interactive timeout (min): <input id="interactive_timeout_min" type="number" min="1"><br>
  </section>

  <hr>
  
  <section>
    <h3>Clock / Timezone</h3>
    Timezone:
    <select id="tz_string">
      <optgroup label="Fixed UTC offsets (no DST)">
        <option value="UTC0">UTC</option>
        <option value="UTC1">UTC-1</option>
        <option value="UTC2">UTC-2</option>
        <option value="UTC3">UTC-3</option>
        <option value="UTC4">UTC-4</option>
        <option value="UTC5">UTC-5</option>
        <option value="UTC6">UTC-6</option>
        <option value="UTC7">UTC-7</option>
        <option value="UTC8">UTC-8</option>
        <option value="UTC9">UTC-9</option>
        <option value="UTC10">UTC-10</option>
        <option value="UTC11">UTC-11</option>
        <option value="UTC12">UTC-12</option>
        <option value="UTC-1">UTC+1</option>
        <option value="UTC-2">UTC+2</option>
        <option value="UTC-3">UTC+3</option>
        <option value="UTC-4">UTC+4</option>
        <option value="UTC-5">UTC+5</option>
        <option value="UTC-6">UTC+6</option>
        <option value="UTC-7">UTC+7</option>
        <option value="UTC-8">UTC+8</option>
        <option value="UTC-9">UTC+9</option>
        <option value="UTC-10">UTC+10</option>
        <option value="UTC-11">UTC+11</option>
        <option value="UTC-12">UTC+12</option>
        <option value="UTC-13">UTC+13</option>
        <option value="UTC-14">UTC+14</option>
      </optgroup>
      <optgroup label="Zones with DST">
        <option value="CET-1CEST,M3.5.0/2,M10.5.0/3">
          Europe/Paris (UTC+1 / UTC+2, DST auto)
        </option>
      </optgroup>
    </select><br>
    <small>Used to set system time via NTP, with DST handling.</small>
  </section>
  
  <hr>

  <section>
    <h3>Misc</h3>
    Device name: <input id="device_name"><br>
    Admin user: <input id="admin_user"><br>
    Admin password: <input id="admin_pass" type="password" placeholder="leave empty to keep current"><br>
    <hr>
    <h4>Sensor offsets</h4>
    Temp offset (degC): <input id="temp_offset" type="number" step="0.1" value="0"><br>
    Humidity offset (%): <input id="hum_offset" type="number" step="0.1" value="0"><br>
  </section>

  <hr>

  <button id="btnSave">Save</button>
  <button id="btnReload">Reload</button>
  <button id="btnReboot" style="background-color: #ff6b6b; color: white;">Reboot</button>
  <div id="status"></div>

  <hr>

  <section>
    <h3>Logs</h3>
    <pre id="logOutput" style="white-space:pre-wrap;max-height:400px;overflow:auto;border:1px solid #ccc;padding:8px;margin-top:8px;background:#f5f5f5;font-size:12px;">Loading...</pre>
  </section>

  <script src="/script_config.js"></script>
</body>
</html>
